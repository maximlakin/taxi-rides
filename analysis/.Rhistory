guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 16
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 17
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 18
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 19
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 20
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 21
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 22
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 23
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-1))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 12
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 13
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 14
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 15
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 16
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 17
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 18
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 19
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 20
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 21
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 22
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour
hour = 23
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != %s and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("%s pm",hour-12))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 0
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("12 am",hour))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 0
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("12 am",hour))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 2
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("12 am",hour))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
hour = 0
# trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '01/01/2014' and pickup_datetime < '03/21/2014') or (pickup_datetime > '09/21/2014' and pickup_datetime < '03/21/2015')  or (pickup_datetime > '09/21/2015' and pickup_datetime < '01/01/2016') limit 100000", hour) )
trips = query(sprintf("SELECT trip_distance, pickup_longitude, pickup_latitude, dropoff_longitude, dropoff_latitude FROM trips where pickup_longitude != 0 and dropoff_longitude != 0 and trip_distance !=0 and extract('hour' from pickup_datetime) = %s and (pickup_datetime > '03/21/2014' and pickup_datetime < '09/21/2014') or (pickup_datetime > '03/21/2015' and pickup_datetime < '09/21/2015')  limit 100000", hour) )
p = ggplot() +
geom_polygon(data = ex_staten_island_map,
aes(x = long, y = lat, group = group),
fill = "#405060", color = "#405060", size = 0) +
geom_point(data = trips,
aes(x = dropoff_longitude, y = dropoff_latitude, color = "dropoff"), alpha=0.2, size=0.1) +
geom_point(data = trips,
aes(x = pickup_longitude, y = pickup_latitude, color = "pickup"), alpha=0.2, size=0.1) +
coord_map(xlim = range(ex_staten_island_map$long), ylim = range(ex_staten_island_map$lat)) +
theme_dark_map() +
title_with_subtitle("Summer Rides",sprintf("12 am",hour))+
guides(colour = guide_legend(override.aes = list(size=4)))+
scale_colour_manual(name  ="Legend", breaks=c("pickup","dropoff"),
labels=c("Pickups", "Dropoffs"), values=c("#6688ff","#88ffff"))
fname = sprintf("~/nyc_map_%s.png",hour)
png(filename = fname, width = 1000, height = 1000, bg = "#203040")
print(p)
dev.off()
